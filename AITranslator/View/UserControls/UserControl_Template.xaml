<UserControl x:Class="AITranslator.View.UserControls.UserControl_Template"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AITranslator.View.UserControls"
             xmlns:calc="clr-namespace:CalcBinding;assembly=CalcBinding"
             xmlns:media ="clr-namespace:System.Windows.Media;assembly=PresentationCore" 
             xmlns:controls="clr-namespace:AITranslator.View.Controls"
             xmlns:vm="clr-namespace:AITranslator.View.Models"
             xmlns:pros="clr-namespace:AITranslator.View.Properties"
             mc:Ignorable="d" 
             d:DesignHeight="550" d:DesignWidth="350">
    <!--<UserControl.DataContext>
        <vm:ViewModel/>
    </UserControl.DataContext>-->
    <ScrollViewer  Margin="5" VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <GroupBox Grid.Column="1" Margin="0,0,5,5" BorderThickness="0.1" BorderBrush="White">
                <GroupBox.Header>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <TextBlock Text="名词替换模板" Foreground="White" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Margin="3,0,0,0" Text="[?]" Cursor="Help" VerticalAlignment="Center" Foreground="White" FontSize="10" ToolTip="这里可以配置名词替换的模板,模板可以在翻译时直接使用"/>
                        <controls:ViewButton Margin="3,0,0,0" Width="14" Height="14" ToolTip="新建" Command="{Binding AddReplaceTemplateCommand}">
                            <controls:ViewButton.Content>
                                <TextBlock Text="+" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </controls:ViewButton.Content>
                        </controls:ViewButton>
                    </StackPanel>
                </GroupBox.Header>
                <ListBox x:Name="list_ReplaceTemplate" Padding="0,5" Background="Transparent" BorderThickness="0" ItemsSource="{Binding ReplaceTemplate}" ScrollViewer.CanContentScroll="False" VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Standard" ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                            <Setter Property="IsEnabled" Value="True"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:Template}">
                            <Border Visibility="{calc:Binding CanRemove,FalseToVisibility=Collapsed}" BorderThickness="1" Padding="3" CornerRadius="3" BorderBrush="Gray" Width="{calc:Binding '(ActualWidth - 2) less 0 ? 0 : (ActualWidth - 2)',ElementName=list_ReplaceTemplate}">
                                <Grid >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock MaxWidth="240" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="Gray" Text="{Binding Name}"/>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <controls:ViewButton Margin="0,0,2,0" Width="18" Height="18" ToolTip="编辑" Command="{Binding EditCommand}">
                                            <controls:ViewButton.Content>
                                                <Viewbox Margin="2">
                                                    <Path Fill="{Binding Foreground,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type controls:ViewButton}}}" Data="M927.99 513.004c0-15.98-13.126-28.952-28.952-28.952-15.828 0-28.954 12.97-28.954 28.952h57.906zM512.996 155.916c15.826 0 28.952-12.972 28.952-28.954 0-15.98-13.126-28.952-28.952-28.952v57.906z m-110.022 511.12l-3.86-28.684 3.86 28.684z m-44.01-44.202L330.4 618.74l28.566 4.092z m38.604-160.13l-20.46-20.46 20.46 20.46z m-22.004 44.2l28.568 4.094-28.568-4.092z m187.616 121.45l20.46 20.5-20.46-20.5z m-44.008 22.08l3.86 28.684-3.86-28.682zM876.26 205.06l-20.46 20.46 20.46-20.46z m0 110.408l-20.46-20.46 20.46 20.46z m-55.204-165.652l20.46-20.46-20.46 20.46z m-110.408 0l20.46 20.5-20.46-20.5zM684.4 205.06c0-15.984-13.126-28.954-28.954-28.954-16.214 0-28.952 12.97-28.952 28.954h57.906z m136.66 194.602c15.826 0 28.952-12.97 28.952-28.952 0-16.02-13.126-28.954-28.954-28.954v57.906z m49.026 113.342v231.626h57.906V513.004h-57.906zM744.62 870.094H281.37V928H744.62v-57.906zM155.906 744.63V281.38H98v463.25h57.906z m125.464-588.714h231.626V98.01H281.37v57.906zM155.906 281.38c0-69.294 56.362-125.464 125.464-125.464V98.01C180.226 98.01 98 180.12 98 281.38h57.906z m125.464 588.714c-69.1 0-125.464-56.17-125.464-125.464H98C98 845.89 180.226 928 281.37 928v-57.906z m588.714-125.464c0 69.294-56.362 125.464-125.464 125.464V928c101.144 0 183.37-82.112 183.37-183.37h-57.906zM800.596 170.316L855.8 225.52l40.92-40.96-55.204-55.204-40.92 40.96z m55.204 124.69L542.72 607.894l40.92 40.96 313.08-312.888-40.92-40.96z m-437.772 188.196l313.08-312.886-40.92-40.96-313.08 312.888 40.92 40.96z m96.898 138.59l-115.814 16.56 8.108 57.328 115.812-16.56-8.106-57.328z m-127.394 5.134l16.6-115.928-57.134-8.184-16.6 115.928 57.134 8.184z m11.58 11.426c-6.562 0.966-12.352-4.748-11.58-11.426l-57.134-8.184c-6.564 44.896 32.04 83.346 76.82 76.938l-8.106-57.328z m-22.004-196.108c-16.214 16.368-27.022 37.64-30.11 60.57l57.134 8.184c1.544-10.54 6.562-20.268 13.896-27.796l-40.92-40.96z m165.612 165.65c-7.334 7.528-17.372 12.392-27.794 13.898l8.106 57.326c23.162-3.28 44.396-13.896 60.608-30.264l-40.92-40.96zM855.8 225.52c18.916 19.186 18.916 50.3 0 69.486l40.92 40.96c41.694-41.808 41.694-109.598 0-151.406l-40.92 40.96z m-14.284-96.164c-42.078-41.808-109.634-41.808-151.328 0l40.92 40.96c18.916-19.186 50.186-19.186 69.488 0l40.92-40.96z m-186.072 75.704h-28.952v4.4c0 2.278 0.386 5.404 1.158 9.188 0.772 7.528 3.088 17.874 6.948 30.072 8.108 24.436 24.32 56.092 55.59 87.246l40.92-40.96c-24.32-24.088-35.9-47.636-41.306-64.584-3.088-8.532-4.246-15.44-5.02-19.96-0.384-2.276-0.384-3.936-0.384-4.862v-0.85c0-0.04 0-0.04 0 0v0.272s0 0.038-28.954 0.038z m34.744 130.906c30.884 31.114 62.54 47.136 87.246 55.28 11.968 4.094 22.39 6.178 30.112 7.26 3.474 0.54 6.562 0.81 8.88 0.964 1.156 0.078 2.314 0.116 3.086 0.154 0.386 0 0.386 0 0.772 0.04h0.772v-28.954-28.954h0.386c-0.386 0-0.386-0.038-1.158-0.038a132.904 132.904 0 0 1-4.632-0.54c-4.632-0.656-11.58-2.008-20.074-4.864-16.986-5.636-40.534-17.218-64.47-41.308l-40.92 40.96z"/>
                                                </Viewbox>
                                            </controls:ViewButton.Content>
                                        </controls:ViewButton>
                                        <controls:ViewButton Width="18" Height="18" FontSize="10" Padding="0,1,0,0" ToolTip="删除" Content="X" Command="{Binding RemoveCommand}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </GroupBox>

            <GroupBox Grid.Column="1" Margin="0,0,5,5" BorderThickness="0.1" BorderBrush="White">
                <GroupBox.Header>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <TextBlock Text="提示词模板" Foreground="White" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Margin="3,0,0,0" Text="[?]" Cursor="Help" Foreground="White" FontSize="10" ToolTip="这里可以配置名词替换的模板,模板可以在翻译时直接使用"/>
                    </StackPanel>
                </GroupBox.Header>
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ComboBox Margin="5" Foreground="White" SelectedIndex="0">
                            <ComboBoxItem Content="模板1"/>
                        </ComboBox>
                        <StackPanel Margin="0,0,5,0" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                            <controls:ViewButton Margin="0,0,5,0" Width="24" Height="24" ToolTip="打开文件">
                                <controls:ViewButton.Content>
                                    <Viewbox Margin="3">
                                        <Path Fill="{Binding Foreground,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type controls:ViewButton}}}" Data="M219.4 438.9h585.1V512H219.4zM219.4 658.3h585.1v73.1H219.4zM877.7 73.1v73.2h73.2v804.6H73.1V146.3h73.2V73.1H0V1024h1024V73.1zM219.4 0h585.1v219.4H219.4z"/>
                                    </Viewbox>
                                </controls:ViewButton.Content>
                            </controls:ViewButton>
                            <controls:ViewButton  Width="24" Height="24" ToolTip="打开文件夹">
                                <controls:ViewButton.Content>
                                    <Viewbox Margin="2">
                                        <Path Fill="{Binding Foreground,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type controls:ViewButton}}}" Data="M1171.561026 935.253333H88.746667V246.285128h1082.814359zM88.746667 88.746667h398.047179L508.849231 157.538462h-420.102564zM1171.561026 157.538462H601.796923l-30.982564-96.098462A88.221538 88.221538 0 0 0 486.793846 0H88.746667A88.746667 88.746667 0 0 0 0 88.746667v846.506666a88.746667 88.746667 0 0 0 88.746667 88.746667h1082.814359A88.746667 88.746667 0 0 0 1260.307692 935.253333V246.285128A88.746667 88.746667 0 0 0 1171.561026 157.538462"/>
                                    </Viewbox>
                                </controls:ViewButton.Content>
                            </controls:ViewButton>
                        </StackPanel>

                    </Grid>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </ScrollViewer>
</UserControl>
